<section id="ingressos" class="section">
  <div class="container">
    <h2>Ingressos</h2>

    <!-- Cards informativos (mantidos) -->
    <div class="tickets">
      <div class="ticket">
        <h3>Adulto</h3>
        <p class="price">R$ 89,90</p>
        <p>13 anos ou mais</p>
      </div>
      <div class="ticket">
        <h3>Crian√ßa</h3>
        <p class="price">R$ 59,90</p>
        <p>3 a 12 anos</p>
      </div>
      <div class="ticket">
        <h3>Combo Fam√≠lia</h3>
        <p class="price">R$ 249,90</p>
        <p>2 adultos + 2 crian√ßas</p>
      </div>
    </div>

    <!-- Nova √°rea interativa de compra -->
    <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: var(--sombra); max-width: 700px; margin: 2.5rem auto 1.5rem;">
      <h3 style="text-align: center; margin-bottom: 1.5rem; color: var(--cor-primaria);">Monte seu ingresso</h3>
      <div style="display: flex; flex-wrap: wrap; gap: 1.5rem; margin-bottom: 1.5rem;">
        <div style="flex: 1; min-width: 200px;">
          <label for="adultos">Adultos (R$ 89,90)</label><br>
          <input type="number" id="adultos" min="0" value="0" style="width: 100%; padding: 0.6rem; margin-top: 0.4rem; border: 1px solid #ccc; border-radius: 6px; font-size: 1rem;">
        </div>
        <div style="flex: 1; min-width: 200px;">
          <label for="criancas">Crian√ßas (R$ 59,90)</label><br>
          <input type="number" id="criancas" min="0" value="0" style="width: 100%; padding: 0.6rem; margin-top: 0.4rem; border: 1px solid #ccc; border-radius: 6px; font-size: 1rem;">
        </div>
      </div>

      <div style="text-align: center; margin: 1.5rem 0; padding: 1rem; background: #f0f9f0; border-radius: 8px;">
        <p style="font-size: 1.1rem; margin: 0;">Total: <strong id="total">R$ 0,00</strong></p>
      </div>

      <div style="text-align: center;">
        <button id="whatsapp-btn" class="btn" style="padding: 0.9rem 2rem; font-size: 1.1rem;">
          Comprar pelo WhatsApp
        </button>
        <p style="font-size: 0.9rem; color: #666; margin-top: 1rem;">
          Seu pedido ser√° enviado automaticamente para nosso atendimento.
        </p>
      </div>
    </div>

    <!-- Bot√£o original (opcional mant√™-lo ou remover ‚Äî deixei comentado) -->
    <!--
    <a href="https://wa.me/5511987654321?text=Ol√°! Gostaria de comprar ingressos para o Pindorama Park." 
       class="btn" target="_blank" rel="noopener">
      Comprar pelo WhatsApp (vers√£o r√°pida)
    </a>
    -->
  </div>
</section>

<script>
  // Garante que o script n√£o conflita se j√° houver outro
  if (typeof ingressosScriptCarregado === 'undefined') {
    const adultInput = document.getElementById('adultos');
    const childInput = document.getElementById('criancas');
    const totalDisplay = document.getElementById('total');
    const whatsappBtn = document.getElementById('whatsapp-btn');

    const PRECO_ADULTO = 89.90;
    const PRECO_CRIANCA = 59.90;
    const NUMERO_WHATSAPP = '5511987654321'; // üîÅ Substitua pelo seu n√∫mero real

    function atualizarTotal() {
      const adultos = parseInt(adultInput.value) || 0;
      const criancas = parseInt(childInput.value) || 0;
      const total = (adultos * PRECO_ADULTO) + (criancas * PRECO_CRIANCA);
      totalDisplay.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
    }

    adultInput.addEventListener('input', atualizarTotal);
    childInput.addEventListener('input', atualizarTotal);

    whatsappBtn.addEventListener('click', () => {
      const adultos = parseInt(adultInput.value) || 0;
      const criancas = parseInt(childInput.value) || 0;
      if (adultos === 0 && criancas === 0) {
        alert('‚ö†Ô∏è Por favor, selecione pelo menos um ingresso.');
        return;
      }

      const total = ((adultos * PRECO_ADULTO) + (criancas * PRECO_CRIANCA)).toFixed(2);
      let mensagem = `Ol√°! Gostaria de comprar ingressos para o Pindorama Park:\n\n`;
      if (adultos > 0) mensagem += `- ${adultos} ingresso(s) adulto(s) ‚Äî R$ ${(adultos * PRECO_ADULTO).toFixed(2)}\n`;
      if (criancas > 0) mensagem += `- ${criancas} ingresso(s) crian√ßa(s) ‚Äî R$ ${(criancas * PRECO_CRIANCA).toFixed(2)}\n`;
      mensagem += `\nTotal: R$ ${total}\n\nAgrade√ßo o atendimento!`;

      const url = `https://wa.me/${NUMERO_WHATSAPP}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, '_blank');
    });

    atualizarTotal();
    window.ingressosScriptCarregado = true;
  }
</script>
